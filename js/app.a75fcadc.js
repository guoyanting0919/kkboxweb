(function(t){function e(e){for(var r,s,i=e[0],o=e[1],u=e[2],d=0,l=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&l.push(c[s][0]),c[s]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);h&&h(e);while(l.length)l.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,i=1;i<a.length;i++){var o=a[i];0!==c[o]&&(r=!1)}r&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},c={app:0},n=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/kkboxweb/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var h=o;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1245:function(t,e,a){"use strict";var r=a("7387"),c=a.n(r);c.a},"3b77":function(t,e,a){"use strict";var r=a("b040"),c=a.n(r);c.a},"56d1":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[t.isLoading?a("isLoading"):t._e(),a("div",[t.searchItems?a("div",{staticClass:"bgRotate"}):t._e()]),a("myIframe",{attrs:{kkboxIframeId:t.iframeId,youtubeIframeId:t.YTTrackId,youtubeSearchName:t.YTSearchName}}),a("navBar",{on:{setSearchInput:t.getSearchInput,setSearchType:t.getsearchType,setsearchItems:t.getsearchItems,setkkboxData:t.getkkboxData,setIsLoading:t.getIsLoading}}),a("router-view",{attrs:{myKkboxData:t.kkboxData,mysearchItems:t.searchItems},on:{setIframeId:t.getIframeId,setYTTrackId:t.getYTTrackId}})],1)},n=[],s=(a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav_bar"},[a("div",{staticClass:"nav_container"},[t._m(0),a("ul",[a("router-link",{attrs:{to:"/track"}},[a("a",{staticClass:"routerBtn",class:{activeRouter:"單曲搜尋"===this.activeRoute},on:{click:function(e){return t.activeRouter("單曲搜尋")}}},[t._v("單曲搜尋")])]),a("router-link",{attrs:{to:"/charts"}},[a("a",{staticClass:"routerBtn",class:{activeRouter:"熱門音榜"===this.activeRoute},on:{click:function(e){return t.activeRouter("熱門音榜")}}},[t._v("熱門音榜")])])],1),a("div",{staticClass:"search_container"},[a("div",{staticClass:"search_radio"},[a("div",{staticClass:"radio_container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchType,expression:"searchType"}],attrs:{type:"radio",id:"track",value:"track"},domProps:{checked:"track"==t.searchType,checked:t._q(t.searchType,"track")},on:{change:[function(e){t.searchType="track"},t.radioChange]}}),a("label",{staticClass:"search_label",attrs:{for:"track"}},[t._v("歌曲")])]),a("div",{staticClass:"radio_container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchType,expression:"searchType"}],attrs:{type:"radio",id:"artist",value:"artist"},domProps:{checked:"artist"==t.searchType,checked:t._q(t.searchType,"artist")},on:{change:[function(e){t.searchType="artist"},t.radioChange]}}),a("label",{staticClass:"search_label",attrs:{for:"artist"}},[t._v("歌手")])])]),a("div",{staticClass:"search_input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],attrs:{type:"text",placeholder:"請輸入關鍵字"},domProps:{value:t.searchInput},on:{change:t.setSearchInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchHandler(e)},input:function(e){e.target.composing||(t.searchInput=e.target.value)}}}),a("button",{attrs:{type:"button"},on:{click:t.searchHandler}},[a("i",{staticClass:"fas fa-search"})])])])])])}),i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"nav_title"},[a("span",[t._v("M.")]),a("span",[t._v("C_")]),a("span",[t._v("M")]),a("span",[t._v("U")]),a("span",[t._v("S")]),a("span",[t._v("I")]),a("span",[t._v("C")])])}],o=(a("99af"),{name:"navBar",data:function(){return{token:"",searchInput:"FIR",searchType:"artist",artistID:"",searchItems:"",kkboxData:"",activeRoute:"單曲搜尋",isLoading:!1}},created:function(){this.getToken(),this.$emit("setSearchInput",this.searchInput),this.$emit("setSearchType",this.searchType)},methods:{getToken:function(){var t=this,e="https://cors-anywhere.herokuapp.com/https://account.kkbox.com/oauth2/token",a={headers:{Accept:"application/x-www-form-urlencoded","Content-Type":"application/x-www-form-urlencoded"}},r={grant_type:"client_credentials",client_id:"fb254aff20b31017a2e84e34ed896523",client_secret:"d2f7853d7a7e2afd98bc4751f1b3c81a"};this.$http.post(e,this.$qs.stringify(r),a).then((function(e){t.token=e.data.access_token,t.getSearch()}))},getSearch:function(){var t=this;t.isLoading=!0,t.$emit("setIsLoading",t.isLoading);var e={headers:{Authorization:" Bearer ".concat(t.token)}};this.$http.get("https://api.kkbox.com/v1.1/search?q=".concat(t.searchInput,"&type=").concat(t.searchType,"&territory=TW"),e).then((function(a){t.kkboxData=a.data,t.$emit("setkkboxData",t.kkboxData),"artist"===t.searchType?(t.artistID=t.kkboxData.artists.data[0].id,t.$http.get("https://api.kkbox.com/v1.1/artists/".concat(t.artistID,"/top-tracks?territory=TW&limit=20"),e).then((function(e){t.searchItems=e.data.data,t.$emit("setsearchItems",t.searchItems),t.isLoading=!1,t.$emit("setIsLoading",t.isLoading)}))):"track"===t.searchType&&t.$http.get("https://api.kkbox.com/v1.1/search?q=".concat(t.searchInput,"&type=").concat(t.searchType,"&territory=TW&limit=20"),e).then((function(e){t.searchItems=e.data.tracks.data,t.$emit("setsearchItems",t.searchItems),t.isLoading=!1,t.$emit("setIsLoading",t.isLoading)}))}))},searchHandler:function(){var t=this;t.getSearch()},setSearchInput:function(){this.$emit("setSearchInput",this.searchInput)},radioChange:function(){this.$emit("setSearchType",this.searchType)},activeRouter:function(t){this.activeRoute=t}}}),u=o,h=(a("3b77"),a("2877")),d=Object(h["a"])(u,s,i,!1,null,null,null),l=d.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"iframe"},[a("div",{staticClass:"KK_iframe_container"},[t.myKkboxIframeId?a("div",{staticClass:"close_kkbox"},[a("span",{on:{click:t.kkboxClose}},[a("i",{staticClass:"fas fa-times-circle"})])]):t._e(),t.myKkboxIframeId?a("iframe",{staticClass:"kkboxIframe",attrs:{allow:"autoplay",src:"https://widget.kkbox.com/v1/?id="+t.myKkboxIframeId+"&type="+t.iframeType+"&terr=TW&lang=TC&autoplay=true",frameborder:"0"}}):t._e()]),a("div",{staticClass:"TY_iframe_container"},[t.myyoutubeIframeId?a("div",{staticClass:"close_YT"},[a("span",{on:{click:t.YTClose}},[a("i",{staticClass:"fas fa-times-circle"})])]):t._e(),t.myyoutubeIframeId?a("iframe",{attrs:{id:"player",type:"text/html",width:"300",height:"200",src:"https://www.youtube.com/embed/"+t.myyoutubeIframeId+"?autoplay=1",frameborder:"0"}}):t._e()])])},f=[],p={props:["kkboxIframeId","youtubeIframeId"],data:function(){return{iframeType:"song",myKkboxIframeId:this.kkboxIframeId,myyoutubeIframeId:this.youtubeIframeId}},watch:{kkboxIframeId:function(t){this.myKkboxIframeId=t},youtubeIframeId:function(t){this.myyoutubeIframeId=t}},methods:{kkboxClose:function(){var t=this;t.myKkboxIframeId=!1},YTClose:function(){var t=this;t.myyoutubeIframeId=""}}},k=p,I=(a("87be"),Object(h["a"])(k,m,f,!1,null,null,null)),y=I.exports,b=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"isLoading"},[a("div",{staticClass:"loader"})])}],T={name:"isLoading"},g=T,_=(a("81da"),Object(h["a"])(g,b,v,!1,null,null,null)),x=_.exports,C={name:"index",components:{navBar:l,myIframe:y,isLoading:x},data:function(){return{token:"",kkboxData:"",searchInput:"",searchType:"",kkboxCharts:[],artistID:"",searchItems:"",iframeId:"",iframeType:"song",YTSearchName:"",YTTrackId:"",isLoading:!0}},computed:{chartsFilter:function(){var t=[];return this.kkboxCharts.forEach((function(e){if(!(t.length<6))return!1;t.push(e)})),t}},methods:{getSearchInput:function(t){this.searchInput=t},getsearchType:function(t){this.searchType=t},getsearchItems:function(t){this.searchItems=t},getkkboxData:function(t){this.kkboxData=t},getIframeId:function(t){this.iframeId=t},getYTTrackId:function(t){this.YTTrackId=t},getIsLoading:function(t){this.isLoading=t},getCharts:function(){var t=this,e={headers:{Authorization:" Bearer ".concat(t.token)}};this.$http.get("https://api.kkbox.com/v1.1/charts?territory=TW",e).then((function(e){console.log(e),t.kkboxCharts=e.data.data}))}},created:function(){this.getSearchInput(),this.getsearchItems()}},Y=C,w=(a("abb8"),Object(h["a"])(Y,c,n,!1,null,null,null)),K=w.exports,$=a("8c4f"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tracks_container"},[a("div",{staticClass:"track_list"},[a("ul",{staticClass:"track"},t._l(t.searchItems,(function(e,r){return a("li",{key:r,staticClass:"track_name",class:{YTcurrentTrack:t.YTcurrentTrack===e.name,KKcurrentTrack:t.KKcurrentTrack===e.name},attrs:{"data-text":e.name}},[t._v(" "+t._s(e.name)+" "),a("div",{staticClass:"play_btn_container"},[a("button",{staticClass:"playBtn playYoutube",on:{click:function(a){return t.playYT(e)}}},[a("i",{staticClass:"fab fa-youtube track_YT_icon"})]),a("button",{staticClass:"playBtn playKKbox",on:{click:function(a){return t.playKkbox(e)}}},[a("i",{staticClass:"fab fa-kickstarter track_KK_icon"})])])])})),0)])])},D=[],L=(a("b0c0"),{props:["myKkboxData","mysearchItems"],data:function(){return{token:"",kkboxData:this.myKkboxData,searchItems:this.mysearchItems,iframeId:"",YTTrackId:"",YTcurrentTrack:"",KKcurrentTrack:""}},watch:{myKkboxData:function(t){this.kkboxData=t},mysearchItems:function(t){this.searchItems=t}},computed:{bgClosure:function(t){return function(t){var e={backgroundImage:"linear-gradient(\n      -".concat(20*t,"deg,\n      #aa52bd 0%,\n      #eaccf8 48%,\n      #6654f1 100%\n    )")};return e}},trackNameData:function(){var t=this,e=[];return t.searchItems.forEach((function(t){e.push(t.name)})),e}},methods:{playKkbox:function(t){var e=this;e.YTcurrentTrack="",e.KKcurrentTrack="",e.YTTrackId="",e.iframeId="",e.$emit("setIframeId",e.iframeId),e.$emit("setYTTrackId",e.YTTrackId),e.KKcurrentTrack=t.name,setTimeout((function(){e.iframeId=t.id,e.$emit("setIframeId",e.iframeId);var a=document.querySelector(".KK_iframe_container");a.style.opacity=.9}),10)},playYT:function(t){var e=this;e.YTcurrentTrack="",e.KKcurrentTrack="",e.iframeId="",e.YTSearchName="",e.YTTrackId="",e.$emit("setIframeId",e.iframeId),e.$emit("setYTTrackId",e.YTTrackId),e.YTcurrentTrack=t.name,setTimeout((function(){e.YTSearchName=t.name;var a=document.querySelector(".TY_iframe_container");a.style.opacity=.9,e.$http.get("https://www.googleapis.com/youtube/v3/search?key=AIzaSyD5X4wGGRG0IyiFPYt66UXKAg-An0ystvQ&part=snippet&type=video&q=".concat(e.YTSearchName)).then((function(t){e.YTTrackId=t.data.items[0].id.videoId,e.$emit("setYTTrackId",e.YTTrackId)}))}),100)}}}),O=L,j=(a("7c5f"),Object(h["a"])(O,S,D,!1,null,null,null)),q=j.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart"},[a("div",{staticClass:"charts_container"},t._l(t.chartsData,(function(e){return a("div",{key:e.id},[a("div",{staticClass:"chart_background",staticStyle:{height:"150px",width:"150px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+e.images[0].url+")"},on:{click:function(a){return t.getChartId(e)}}},[a("div",{staticClass:"bg_matte"},[a("p",{staticClass:"data_title"},[t._v(t._s(e.title))])])])])})),0),t.chartTracks?a("div",{staticClass:"charts_tracks_container"},[a("div",{staticClass:"title_container"},[a("span",{staticClass:"divH2"},[t._v(t._s(t.chartTitle))])]),t._l(t.chart25Tracks,(function(e){return a("div",{key:e.id,staticClass:"mt30"},[a("div",{staticClass:"track_button"},[a("button",{staticClass:"playYoutube",on:{click:function(a){return t.playYT(e)}}},[a("i",{staticClass:"fab fa-youtube YTicon"})]),a("button",{staticClass:"playKKbox",on:{click:function(a){return t.playKkbox(e)}}},[a("i",{staticClass:"fab fa-kickstarter KKicon"})])]),a("div",{staticClass:"chart_track"},[a("div",{staticClass:"track_img_radius"},[a("div",{staticClass:"track_img",staticStyle:{height:"160px",width:"160px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+e.album.images[0].url+")"}})]),a("p",[t._v(t._s(e.name))])])])}))],2):t._e()])},R=[],A={props:["myKkboxData","mysearchItems"],data:function(){return{token:"",chartsData:"",chartId:"",chartTracks:"",chartTitle:"",kkboxData:this.myKkboxData,searchItems:this.mysearchItems,iframeId:"",YTTrackId:""}},computed:{chart25Tracks:function(){var t=this,e=[];return t.chartTracks.forEach((function(t){e.length<=23&&e.push(t)})),e}},methods:{getToken:function(){var t=this,e="https://cors-anywhere.herokuapp.com/https://account.kkbox.com/oauth2/token",a={headers:{Accept:"application/x-www-form-urlencoded","Content-Type":"application/x-www-form-urlencoded"}},r={grant_type:"client_credentials",client_id:"fb254aff20b31017a2e84e34ed896523",client_secret:"d2f7853d7a7e2afd98bc4751f1b3c81a"};this.$http.post(e,this.$qs.stringify(r),a).then((function(e){t.token=e.data.access_token,t.getChartsData()}))},getChartsData:function(){var t=this,e={headers:{Authorization:" Bearer ".concat(t.token)}};this.$http.get("https://api.kkbox.com/v1.1/charts?territory=TW",e).then((function(e){t.chartsData=e.data.data}))},getChartId:function(t){var e=this,a={headers:{Authorization:" Bearer ".concat(e.token)}};console.log(t.id),e.chartId=t.id,this.$http.get("https://api.kkbox.com/v1.1/charts/".concat(e.chartId,"?territory=TW"),a).then((function(t){console.log(t),e.chartTracks=t.data.tracks.data,e.chartTitle=t.data.title}))},playKkbox:function(t){var e=this;e.YTTrackId="",e.iframeId="",e.$emit("setIframeId",e.iframeId),e.$emit("setYTTrackId",e.YTTrackId),setTimeout((function(){e.iframeId=t.id,e.$emit("setIframeId",e.iframeId);var a=document.querySelector(".KK_iframe_container");a.style.opacity=.9}),10)},playYT:function(t){var e=this;e.iframeId="",e.YTSearchName="",e.YTTrackId="",e.$emit("setIframeId",e.iframeId),e.$emit("setYTTrackId",e.YTTrackId),setTimeout((function(){e.YTSearchName=t.name;var a=document.querySelector(".TY_iframe_container");a.style.opacity=.9,e.$http.get("https://www.googleapis.com/youtube/v3/search?key=AIzaSyD5X4wGGRG0IyiFPYt66UXKAg-An0ystvQ&part=snippet&type=video&q=".concat(e.YTSearchName)).then((function(t){e.YTTrackId=t.data.items[0].id.videoId,e.$emit("setYTTrackId",e.YTTrackId)}))}),100)}},created:function(){this.getToken()}},E=A,P=(a("1245"),Object(h["a"])(E,N,R,!1,null,null,null)),B=P.exports;r["a"].use($["a"]);var z=[{path:"*",redirect:"track"},{path:"/track",name:"Track",component:q},{path:"/charts",name:"Charts",component:B}],W=new $["a"]({routes:z}),G=W,M=a("2f62");r["a"].use(M["a"]);var F=new M["a"].Store({state:{},mutations:{},actions:{},modules:{}}),H=a("bc3a"),X=a.n(H),U=a("a7fe"),J=a.n(U),Q=a("4328"),V=a.n(Q);r["a"].prototype.$qs=V.a,r["a"].use(J.a,X.a),r["a"].config.productionTip=!1,new r["a"]({router:G,store:F,render:function(t){return t(K)}}).$mount("#app")},"69e3":function(t,e,a){},7387:function(t,e,a){},"7c5f":function(t,e,a){"use strict";var r=a("b603"),c=a.n(r);c.a},"81da":function(t,e,a){"use strict";var r=a("69e3"),c=a.n(r);c.a},"87be":function(t,e,a){"use strict";var r=a("f66d"),c=a.n(r);c.a},abb8:function(t,e,a){"use strict";var r=a("56d1"),c=a.n(r);c.a},b040:function(t,e,a){},b603:function(t,e,a){},f66d:function(t,e,a){}});
//# sourceMappingURL=app.a75fcadc.js.map